-- A method to convert a delimited string like checkbox items' value in APEX to a selectable table to use simply in SQL queries

CREATE or REPLACE TYPE t_row AS OBJECT (
  id           NUMBER,
  description  VARCHAR2(4000)
);

CREATE or REPLACE TYPE t_row_tab IS TABLE OF t_row ;

CREATE or REPLACE FUNCTION string_to_selectable_table ( p_string      IN VARCHAR2,   p_delimiter   IN VARCHAR2 DEFAULT ':')
      RETURN t_row_tab PIPELINED
   AS
      n_row NUMBER := 1 ;
      v_str VARCHAR2(4000) ;
   BEGIN      
      v_str := trim(regexp_substr(p_string, '[^'|| p_delimiter || ']+', 1, n_row) ) ;
      WHILE ( v_str is not null )
      LOOP
          PIPE ROW ( t_row( n_row ,  v_str) );
          n_row := n_row + 1 ;
          v_str := trim(regexp_substr(p_string, '[^'|| p_delimiter || ']+', 1, n_row) ) ;
          
      END LOOP;

      RETURN;
END string_to_selectable_table;

-- Example Query
select id,description  from table(string_to_selectable_table('Option1:Option2:Option3', ':') ) aa;
   